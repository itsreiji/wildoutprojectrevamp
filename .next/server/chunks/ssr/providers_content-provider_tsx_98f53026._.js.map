{"version":3,"sources":["../../../../providers/content-provider.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, ReactNode, useEffect } from 'react';\nimport { supabaseClient } from '../lib/supabase/client';\nimport { useAuth } from './auth-provider';\nimport type { AuthRole } from './auth-provider';\nimport type { Json, TablesInsert, TablesUpdate } from '../types/supabase';\n\nimport { cleanupEventAssets, cleanupTeamMemberAsset, cleanupPartnerAsset, cleanupGalleryAsset } from '../utils/storageHelpers';\nimport type {\n  TeamMember,\n  Partner,\n  HeroContent,\n  AboutContent,\n  GalleryImage,\n  SiteSettings,\n  PublicEventsViewRow,\n  ContentContextType,\n  AdminSection,\n  SectionContent,\n  SectionPermissions,\n  LandingEvent,\n  EventArtist\n} from '../types/content';\n\nconst normalizeSocialLinks = (value: Json | undefined): Record<string, string | null> => {\n  if (!value || typeof value === 'string') return {};\n  if (Array.isArray(value)) return {};\n  return Object.entries(value as Record<string, Json | undefined>).reduce<Record<string, string | null>>(\n    (acc, [key, entry]) => {\n      if (typeof entry === 'string') {\n        acc[key] = entry;\n      } else if (typeof entry === 'number' || typeof entry === 'boolean') {\n        acc[key] = String(entry);\n      } else if (entry === null || entry === undefined) {\n        acc[key] = null;\n      }\n      return acc;\n    },\n    {}\n  );\n};\n\nconst ensureStringArray = (value: Json | undefined): string[] | undefined => {\n  if (!value) return undefined;\n  if (Array.isArray(value)) {\n    return value.filter((item): item is string => typeof item === 'string');\n  }\n  return undefined;\n};\n\n// Initial data aligned with new types\nconst INITIAL_EVENTS: any[] = [];\nconst INITIAL_PARTNERS: Partner[] = [];\nconst INITIAL_GALLERY: GalleryImage[] = [];\nconst INITIAL_TEAM: TeamMember[] = [];\nconst INITIAL_HERO: HeroContent = {\n  id: '00000000-0000-0000-0000-000000000001',\n  title: 'WildOut!',\n  subtitle: 'Media Digital Nightlife & Event Multi-Platform',\n  description: \"Indonesia's premier creative community connecting artists, events, and experiences.\",\n  stats: { events: '500+', members: '50K+', partners: '100+' },\n  cta_text: 'Join Us',\n  cta_link: '/events',\n  created_at: new Date().toISOString(),\n  updated_at: new Date().toISOString(),\n  updated_by: null,\n};\nconst INITIAL_ABOUT: AboutContent = {\n  id: '00000000-0000-0000-0000-000000000002',\n  title: 'About WildOut!',\n  subtitle: \"Indonesia's leading creative community platform, connecting artists, events, and experiences since 2020.\",\n  founded_year: '2020',\n  story: [\n    'Founded in 2020, WildOut! celebrates Indonesiaâ€™s creative culture.',\n    'We host community-driven events that bring artists, venues, and sponsors together.',\n  ],\n  features: [\n    { title: 'Community First', description: 'We build lasting connections.' },\n    { title: 'Unforgettable Experiences', description: 'Every event is crafted to be memorable.' },\n  ],\n  created_at: new Date().toISOString(),\n  updated_at: new Date().toISOString(),\n  updated_by: null,\n};\nconst INITIAL_SETTINGS: SiteSettings = {\n  id: '00000000-0000-0000-0000-000000000003',\n  site_name: 'WildOut!',\n  site_description: \"Indonesia's premier creative community platform\",\n  tagline: \"Indonesia's premier creative community platform\",\n  email: 'contact@wildout.id',\n  phone: '+62 21 1234 567',\n  address: 'Jakarta, Indonesia',\n  social_media: {\n    instagram: 'https://instagram.com/wildout.id',\n    twitter: 'https://twitter.com/wildout_id',\n    facebook: 'https://facebook.com/wildout.id',\n    youtube: 'https://youtube.com/@wildout',\n  },\n  created_at: new Date().toISOString(),\n  updated_at: new Date().toISOString(),\n  updated_by: null,\n};\n\n// Fetch functions using content.ts types\nconst fetchHeroContent = async (): Promise<HeroContent> => {\n  try {\n    const { data, error } = await supabaseClient.rpc('get_hero_content');\n    if (error) {\n      console.error('Error fetching hero content:', error);\n      return INITIAL_HERO;\n    }\n    const result = data?.[0];\n    if (result) {\n      return {\n        id: result.id ?? INITIAL_HERO.id,\n        title: result.title ?? INITIAL_HERO.title,\n        subtitle: result.subtitle ?? INITIAL_HERO.subtitle,\n        description: result.description ?? INITIAL_HERO.description,\n        stats: typeof result.stats === 'string' ? JSON.parse(result.stats) ?? INITIAL_HERO.stats : (result.stats ?? INITIAL_HERO.stats),\n        cta_text: result.cta_text ?? INITIAL_HERO.cta_text,\n        cta_link: result.cta_link ?? INITIAL_HERO.cta_link,\n        created_at: result.created_at ?? INITIAL_HERO.created_at,\n        updated_at: result.updated_at ?? INITIAL_HERO.updated_at,\n        updated_by: result.updated_by ?? INITIAL_HERO.updated_by,\n      };\n    }\n    return INITIAL_HERO;\n  } catch (error) {\n    console.error('Error in fetchHeroContent:', error);\n    return INITIAL_HERO;\n  }\n};\n\nconst fetchAboutContent = async (): Promise<AboutContent> => {\n  try {\n    const { data, error } = await supabaseClient.rpc('get_about_content');\n    if (error) {\n      console.error('Error fetching about content:', error);\n      return INITIAL_ABOUT;\n    }\n    const result = data?.[0];\n    if (result) {\n      return {\n        id: result.id ?? INITIAL_ABOUT.id,\n        title: result.title ?? INITIAL_ABOUT.title,\n        subtitle: result.subtitle ?? INITIAL_ABOUT.subtitle,\n        founded_year: result.founded_year ?? INITIAL_ABOUT.founded_year,\n        story: ensureStringArray(result.story) ?? INITIAL_ABOUT.story,\n        features: typeof result.features === 'string' ? JSON.parse(result.features) ?? INITIAL_ABOUT.features : (result.features ?? INITIAL_ABOUT.features),\n        created_at: result.created_at ?? INITIAL_ABOUT.created_at,\n        updated_at: result.updated_at ?? INITIAL_ABOUT.updated_at,\n        updated_by: result.updated_by ?? INITIAL_ABOUT.updated_by,\n      };\n    }\n    return INITIAL_ABOUT;\n  } catch (error) {\n    console.error('Error in fetchAboutContent:', error);\n    return INITIAL_ABOUT;\n  }\n};\n\nconst fetchSiteSettings = async (): Promise<SiteSettings> => {\n  try {\n    const { data, error } = await supabaseClient.rpc('get_site_settings');\n    if (error) {\n      console.error('Error fetching site settings:', error);\n      return INITIAL_SETTINGS;\n    }\n    const result = data?.[0];\n    if (result) {\n      return {\n        id: result.id ?? INITIAL_SETTINGS.id,\n        site_name: result.site_name ?? INITIAL_SETTINGS.site_name,\n        site_description: result.site_description ?? INITIAL_SETTINGS.site_description,\n        tagline: result.tagline ?? INITIAL_SETTINGS.tagline,\n        email: result.email ?? INITIAL_SETTINGS.email,\n        phone: result.phone ?? INITIAL_SETTINGS.phone,\n        address: result.address ?? INITIAL_SETTINGS.address,\n        social_media: normalizeSocialLinks(result.social_media) as Record<string, string>,\n        created_at: result.created_at ?? INITIAL_SETTINGS.created_at,\n        updated_at: result.updated_at ?? INITIAL_SETTINGS.updated_at,\n        updated_by: result.updated_by ?? INITIAL_SETTINGS.updated_by,\n      };\n    }\n    return INITIAL_SETTINGS;\n  } catch (error) {\n    console.error('Error in fetchSiteSettings:', error);\n    return INITIAL_SETTINGS;\n  }\n};\n\nconst fetchEvents = async (): Promise<LandingEvent[]> => {\n  try {\n    const { data, error } = await supabaseClient\n      .from('public_events_view')\n      .select('*')\n      .order('start_date', { ascending: true });\n    if (error) {\n      console.error('Error fetching events:', error);\n      return [];\n    }\n    return (data || []).map((row: any): LandingEvent => {\n      // Map database status to LandingEvent status\n      let status: LandingEvent['status'] = 'upcoming';\n      if (row.status === 'published') {\n        // Check if event is ongoing or upcoming based on dates\n        const now = new Date();\n        const startDate = row.start_date ? new Date(row.start_date) : null;\n        const endDate = row.end_date ? new Date(row.end_date) : null;\n        if (startDate && endDate && now >= startDate && now <= endDate) {\n          status = 'ongoing';\n        } else if (endDate && now > endDate) {\n          status = 'completed';\n        } else {\n          status = 'upcoming';\n        }\n      } else if (row.status === 'ongoing') {\n        status = 'ongoing';\n      } else if (row.status === 'completed' || row.status === 'cancelled' || row.status === 'archived') {\n        status = 'completed';\n      }\n\n      return {\n        id: row.id ?? '',\n        title: row.title ?? '',\n        description: row.description ?? null,\n        start_date: row.start_date ?? '',\n        end_date: row.end_date ?? '',\n        time: row.time ?? '',\n        location: row.location ?? '',\n        // address: row.address ?? '',\n        category: row.category ?? null,\n        status,\n        capacity: row.capacity || row.max_attendees || null,\n        attendees: row.attendees || row.current_attendees || null,\n        currency: row.currency || 'IDR',\n        price: row.price || null,\n        price_range: row.price_range || null,\n        // ticket_url: row.ticket_url || null,\n        artists: row.artists || [],\n        gallery: row.gallery || [],\n        highlights: row.highlights || [],\n        metadata: row.metadata ?? {},\n        created_at: row.created_at,\n        updated_at: row.updated_at,\n        tags: row.tags || [],\n        image_url: row.image_url || '',\n        partner_name: row.partner_name || '',\n        partner_logo_url: row.partner_logo_url || '',\n      };\n    }) as LandingEvent[];\n  } catch (error) {\n    console.error('Error in fetchEvents:', error);\n    return [];\n  }\n};\n\nconst fetchTeamMembers = async (): Promise<TeamMember[]> => {\n  try {\n    const { data, error } = await supabaseClient\n      .from('team_members')\n      .select('*')\n      .eq('status', 'active')\n      .order('display_order')\n      .order('name');\n    if (error) {\n      console.error('Error fetching team members:', error);\n      return INITIAL_TEAM;\n    }\n    return (data || []).map((row: any): TeamMember => ({\n      id: row.id,\n      name: row.name || '',\n      title: row.title || row.role || undefined,\n      bio: row.bio || undefined,\n      avatar_url: row.avatar_url || undefined,\n      email: row.email || undefined,\n      status: row.status as 'active' | 'inactive' | undefined || 'active',\n      social_links: normalizeSocialLinks(row.social_links),\n      display_order: row.display_order || undefined,\n      created_at: row.created_at,\n      updated_at: row.updated_at,\n      linkedin_url: row.linkedin_url || null,\n    }));\n  } catch (error) {\n    console.error('Error in fetchTeamMembers:', error);\n    return INITIAL_TEAM;\n  }\n};\n\nconst fetchPartners = async (): Promise<Partner[]> => {\n  try {\n    const { data, error } = await supabaseClient\n      .from('partners')\n      .select('*')\n      .eq('status', 'active')\n      .order('name');\n    if (error) {\n      console.error('Error fetching partners:', error);\n      return INITIAL_PARTNERS;\n    }\n    return (data || []).map((row: any): Partner => ({\n      id: row.id,\n      name: row.name || '',\n      description: row.description || undefined,\n      logo_url: row.logo_url || undefined,\n      website_url: row.website_url || undefined,\n      category: row.category || undefined,\n      status: row.status as 'active' | 'inactive' | undefined || 'active',\n      // featured: row.featured || undefined,\n      contact_email: row.contact_email || undefined,\n      contact_phone: row.contact_phone || undefined,\n      social_links: normalizeSocialLinks(row.social_links),\n      created_at: row.created_at,\n      updated_at: row.updated_at,\n      address: row.address || null,\n      city: row.city || null,\n      country: row.country || null,\n    }));\n  } catch (error) {\n    console.error('Error in fetchPartners:', error);\n    return INITIAL_PARTNERS;\n  }\n};\n\nconst fetchGallery = async (): Promise<GalleryImage[]> => {\n  try {\n    const { data, error } = await supabaseClient\n      .from('gallery_items')\n      .select('*')\n      .order('display_order')\n      .order('created_at', { ascending: false });\n    if (error) {\n      console.error('Error fetching gallery:', error);\n      return INITIAL_GALLERY;\n    }\n    return (data || []).map((row: any): GalleryImage => ({\n      id: row.id,\n      title: row.title || undefined,\n      description: row.description || undefined,\n      image_url: row.image_url || undefined,\n      category: row.category || undefined,\n      status: row.status || undefined,\n      tags: row.tags || undefined,\n      // caption: row.title || undefined,\n      // uploadDate: row.created_at || undefined,\n      // event: undefined,\n      created_at: row.created_at || undefined,\n      updated_at: row.updated_at || undefined,\n      display_order: row.display_order || null,\n      event_id: row.event_id || null,\n      metadata: row.metadata ?? {},\n      partner_id: row.partner_id || null,\n      thumbnail_url: row.thumbnail_url || null,\n    }));\n  } catch (error) {\n    console.error('Error in fetchGallery:', error);\n    return INITIAL_GALLERY;\n  }\n};\n\n// Content context implementation\nconst ContentContext = createContext<ContentContextType | null>(null);\n\nexport function ContentProvider({ children }: { children: ReactNode }) {\n  const { user, role: userRole } = useAuth();\n  const [events, setEvents] = useState<LandingEvent[]>(INITIAL_EVENTS);\n  const [partners, setPartners] = useState<Partner[]>(INITIAL_PARTNERS);\n  const [gallery, setGallery] = useState<GalleryImage[]>(INITIAL_GALLERY);\n  const [team, setTeam] = useState<TeamMember[]>(INITIAL_TEAM);\n  const [hero, setHero] = useState<HeroContent>(INITIAL_HERO);\n  const [about, setAbout] = useState<AboutContent>(INITIAL_ABOUT);\n  const [settings, setSettings] = useState<SiteSettings>(INITIAL_SETTINGS);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Admin sections data\n  const [adminSections, setAdminSections] = useState<AdminSection[]>([]);\n  const [sectionContent, setSectionContent] = useState<Record<string, SectionContent>>({});\n  const [adminSectionsLoading, setAdminSectionsLoading] = useState(false);\n\n  // Fetch initial data\n  useEffect(() => {\n    const initializeData = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const [eventsData, partnersData, galleryData, teamData, heroData, aboutData, settingsData] = await Promise.all([\n          fetchEvents(),\n          fetchPartners(),\n          fetchGallery(),\n          fetchTeamMembers(),\n          fetchHeroContent(),\n          fetchAboutContent(),\n          fetchSiteSettings(),\n        ]);\n        setEvents(eventsData);\n        setPartners(partnersData);\n        setGallery(galleryData);\n        setTeam(teamData);\n        setHero(heroData);\n        setAbout(aboutData);\n        setSettings(settingsData);\n      } catch (err) {\n        console.error('Error initializing content:', err);\n        setError('Failed to load content');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    initializeData();\n  }, []);\n\n  // Fetch admin sections\n  useEffect(() => {\n    const initializeAdminSections = async () => {\n      if (!user || userRole !== 'admin') {\n        setAdminSections([]);\n        setSectionContent({});\n        return;\n      }\n\n      setAdminSectionsLoading(true);\n      try {\n        // Use RPC to get sections enabled for the user\n        const { data, error } = await supabaseClient\n          .rpc('get_admin_sections_for_user', { p_user_id: user.id });\n\n        if (error) {\n          console.error('Error fetching admin sections:', error);\n          return;\n        }\n\n        const sections = (data || []).map((row: any) => ({\n          id: row.id,\n          slug: row.slug,\n          label: row.label,\n          display_name: row.label, // mapped for compatibility\n          name: row.slug, // mapped for compatibility\n          description: row.description,\n          display_order: row.order_index,\n          icon: row.icon,\n          category: row.category,\n          enabled: row.enabled,\n          created_at: row.created_at,\n          updated_at: row.updated_at,\n          permissions: ['view', 'edit'], // Default permissions for now since RPC filters access\n        }));\n\n        setAdminSections(sections);\n\n        // Fetch section content using RPC\n        const contentPromises = sections.map(async (section: any) => {\n          const { data, error } = await supabaseClient\n            .rpc('get_section_content', {\n              p_section_slug: section.slug,\n              p_user_id: user.id\n            });\n\n          if (error) {\n            console.error(`Error fetching section content for ${section.slug}:`, error);\n            return { sectionId: section.id, sectionSlug: section.slug, content: null };\n          }\n\n          // RPC returns an array, take the first item if available\n          const contentData = data && data.length > 0 ? data[0] : null;\n\n          return {\n            sectionId: section.id,\n            sectionSlug: section.slug,\n            content: contentData,\n          };\n        });\n\n        const contentResults = await Promise.all(contentPromises);\n        const newSectionContent: Record<string, SectionContent> = {};\n        contentResults.forEach(({ sectionSlug, content }) => {\n          if (content && sectionSlug) {\n            newSectionContent[sectionSlug] = content;\n          }\n        });\n\n        setSectionContent(newSectionContent);\n      } catch (err) {\n        console.error('Error initializing admin sections:', err);\n      } finally {\n        setAdminSectionsLoading(false);\n      }\n    };\n\n    initializeAdminSections();\n  }, [user, userRole]);\n\n  // Event mutations\n  const addEvent = async (event: TablesInsert<'events'>) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('events')\n        .insert(event)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setEvents((prev) => [...prev, data as LandingEvent]);\n      return data;\n    } catch (err) {\n      console.error('Error adding event:', err);\n      throw err;\n    }\n  };\n\n  const updateEvent = async (id: string, updates: TablesUpdate<'events'>) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('events')\n        .update(updates)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setEvents((prev) => prev.map((event) => (event.id === id ? (data as LandingEvent) : event)));\n      return data;\n    } catch (err) {\n      console.error('Error updating event:', err);\n      throw err;\n    }\n  };\n\n  const deleteEvent = async (id: string) => {\n    try {\n      const itemToDelete = events.find((event) => event.id === id);\n      if (itemToDelete?.image_url) {\n        await cleanupEventAssets(itemToDelete.image_url);\n      }\n\n      const { error } = await supabaseClient.from('events').delete().eq('id', id);\n      if (error) throw error;\n\n      setEvents((prev) => prev.filter((event) => event.id !== id));\n    } catch (err) {\n      console.error('Error deleting event:', err);\n      throw err;\n    }\n  };\n\n  // Team member mutations\n  const addTeamMember = async (member: TablesInsert<'team_members'>) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('team_members')\n        .insert(member)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setTeam((prev) => [...prev, data as TeamMember]);\n      return data;\n    } catch (err) {\n      console.error('Error adding team member:', err);\n      throw err;\n    }\n  };\n\n  const updateTeamMember = async (id: string, updates: TablesUpdate<'team_members'>) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('team_members')\n        .update(updates)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setTeam((prev) => prev.map((member) => (member.id === id ? (data as TeamMember) : member)));\n      return data;\n    } catch (err) {\n      console.error('Error updating team member:', err);\n      throw err;\n    }\n  };\n\n  const deleteTeamMember = async (id: string) => {\n    try {\n      const itemToDelete = team.find((member) => member.id === id);\n      if (itemToDelete?.avatar_url) {\n        await cleanupTeamMemberAsset(itemToDelete.avatar_url);\n      }\n\n      const { error } = await supabaseClient.from('team_members').delete().eq('id', id);\n      if (error) throw error;\n\n      setTeam((prev) => prev.filter((member) => member.id !== id));\n    } catch (err) {\n      console.error('Error deleting team member:', err);\n      throw err;\n    }\n  };\n\n  // Partner mutations\n  const addPartner = async (partner: TablesInsert<'partners'>) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('partners')\n        .insert(partner)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setPartners((prev) => [...prev, data as Partner]);\n      return data;\n    } catch (err) {\n      console.error('Error adding partner:', err);\n      throw err;\n    }\n  };\n\n  const updatePartner = async (id: string, updates: TablesUpdate<'partners'>) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('partners')\n        .update(updates)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setPartners((prev) => prev.map((partner) => (partner.id === id ? (data as Partner) : partner)));\n      return data;\n    } catch (err) {\n      console.error('Error updating partner:', err);\n      throw err;\n    }\n  };\n\n  const deletePartner = async (id: string) => {\n    try {\n      const itemToDelete = partners.find((partner) => partner.id === id);\n      if (itemToDelete?.logo_url) {\n        await cleanupPartnerAsset(itemToDelete.logo_url);\n      }\n\n      const { error } = await supabaseClient.from('partners').delete().eq('id', id);\n      if (error) throw error;\n\n      setPartners((prev) => prev.filter((partner) => partner.id !== id));\n    } catch (err) {\n      console.error('Error deleting partner:', err);\n      throw err;\n    }\n  };\n\n  // Gallery mutations\n  const addGalleryImage = async (image: TablesInsert<'gallery_items'>) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('gallery_items')\n        .insert(image)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setGallery((prev) => [...prev, data as GalleryImage]);\n      return data;\n    } catch (err) {\n      console.error('Error adding gallery image:', err);\n      throw err;\n    }\n  };\n\n  const updateGalleryImage = async (id: string, updates: TablesUpdate<'gallery_items'>) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('gallery_items')\n        .update(updates)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setGallery((prev) => prev.map((image) => (image.id === id ? (data as GalleryImage) : image)));\n      return data;\n    } catch (err) {\n      console.error('Error updating gallery image:', err);\n      throw err;\n    }\n  };\n\n  const deleteGalleryImage = async (id: string) => {\n    try {\n      const itemToDelete = gallery.find((image) => image.id === id);\n      if (itemToDelete?.image_url) {\n        await cleanupGalleryAsset(itemToDelete.image_url);\n      }\n\n      const { error } = await supabaseClient.from('gallery_items').delete().eq('id', id);\n      if (error) throw error;\n\n      setGallery((prev) => prev.filter((image) => image.id !== id));\n    } catch (err) {\n      console.error('Error deleting gallery image:', err);\n      throw err;\n    }\n  };\n\n  // Event Artists mutations\n  const fetchEventArtists = async (eventId: string): Promise<EventArtist[]> => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('event_artists')\n        .select('*')\n        .eq('event_id', eventId)\n        .order('display_order');\n\n      if (error) throw error;\n\n      return (data || []).map((row: any) => ({\n        id: row.id,\n        event_id: row.event_id,\n        name: row.name,\n        role: row.role || undefined,\n        image: row.image || undefined,\n        display_order: row.display_order || 0,\n        created_at: row.created_at,\n        updated_at: row.updated_at,\n      }));\n    } catch (err) {\n      console.error('Error fetching event artists:', err);\n      throw err;\n    }\n  };\n\n  const addEventArtist = async (artist: any) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('event_artists')\n        .insert(artist)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      return data;\n    } catch (err) {\n      console.error('Error adding event artist:', err);\n      throw err;\n    }\n  };\n\n  const updateEventArtist = async (id: string, updates: any) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('event_artists')\n        .update(updates)\n        .eq('id', id)\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      return data;\n    } catch (err) {\n      console.error('Error updating event artist:', err);\n      throw err;\n    }\n  };\n\n  const deleteEventArtist = async (id: string) => {\n    try {\n      const { error } = await supabaseClient.from('event_artists').delete().eq('id', id);\n      if (error) throw error;\n    } catch (err) {\n      console.error('Error deleting event artist:', err);\n      throw err;\n    }\n  };\n\n  // Content mutations\n  const saveHeroContent = async (content: HeroContent) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('hero_content')\n        .upsert({\n          ...content,\n          updated_at: new Date().toISOString()\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setHero(data);\n      return data;\n    } catch (err) {\n      console.error('Error saving hero content:', err);\n      throw err;\n    }\n  };\n\n  const saveAboutContent = async (content: AboutContent) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('about_content')\n        .upsert({\n          ...content,\n          updated_at: new Date().toISOString()\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setAbout(data);\n      return data;\n    } catch (err) {\n      console.error('Error saving about content:', err);\n      throw err;\n    }\n  };\n\n  const saveSiteSettings = async (settings: SiteSettings) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('site_settings')\n        .upsert({\n          ...settings,\n          updated_at: new Date().toISOString()\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setSettings(data);\n      return data;\n    } catch (err) {\n      console.error('Error saving site settings:', err);\n      throw err;\n    }\n  };\n\n  // Admin sections methods\n  const getSectionContent = (sectionId: string): SectionContent | null => {\n    return sectionContent[sectionId] || null;\n  };\n\n  const getSectionPermissions = (sectionId: string): SectionPermissions[] => {\n    const section = adminSections.find((s) => s.id === sectionId);\n    // TODO: Add permissions field to AdminSection type in types/content.ts\n    return [];\n  };\n\n  const updateSectionContent = async (sectionId: string, content: SectionContent) => {\n    try {\n      const { data, error } = await supabaseClient\n        .from('section_content')\n        .upsert({\n          ...content,\n          section_id: sectionId,\n          updated_at: new Date().toISOString()\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      setSectionContent((prev) => ({\n        ...prev,\n        [sectionId]: data,\n      }));\n\n      return data;\n    } catch (err) {\n      console.error('Error updating section content:', err);\n      throw err;\n    }\n  };\n\n  const value: any = {\n    // Content data\n    // TODO: Map LandingEvent[] to the expected interface with all required fields\n    events: events as any,\n    partners,\n    gallery,\n    team,\n    hero,\n    about,\n    settings,\n    // Loaders & errors\n    loading,\n    error,\n    // Event mutations\n    addEvent,\n    updateEvent,\n    deleteEvent,\n    // Team member mutations\n    addTeamMember,\n    updateTeamMember,\n    deleteTeamMember,\n    // Partner mutations\n    addPartner,\n    updatePartner,\n    deletePartner,\n    // Gallery mutations\n    addGalleryImage,\n    updateGalleryImage,\n    deleteGalleryImage,\n\n    // Event Artists mutations\n    fetchEventArtists,\n    addEventArtist,\n    updateEventArtist,\n    deleteEventArtist,\n\n    // Content mutations\n    saveHeroContent,\n    saveAboutContent,\n    saveSiteSettings,\n    // Admin sections\n    adminSections,\n    sectionContent,\n    adminSectionsLoading,\n    getSectionContent,\n    getSectionPermissions,\n    updateSectionContent,\n  };\n\n  return <ContentContext.Provider value={value}>{children}</ContentContext.Provider>;\n}\n\nexport function useContent() {\n  const context = useContext(ContentContext);\n  if (!context) throw new Error('useContent must be within ContentProvider');\n  return context;\n}"],"names":[],"mappings":"kDAEA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA"}